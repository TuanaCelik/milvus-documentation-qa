{"content": "<iframe src=\"https://www.googletagmanager.com/ns.html?id=G-V1G3KQ048M\" height=\"0\" width=\"0\" style=\"display: none; visibility: hidden\" aria-hidden=\"true\"></iframe>DocsTutorialsToolsBlogCommunityTry Managed Milvus FREEDocsTutorialsToolsBlogCommunityStars22kJoin SlackTry Managed Milvus FREEHow we use cookiesThis website stores cookies on your computer. By continuing to browse or by clicking \u2018Accept\u2019, you agree to the storing of cookies on your device to enhance your site experience and for analytical purposes.AcceptSearch\u2318KHomev2.2.x\u200bAbout MilvusGet StartedUser GuideAdministration GuideConfigure MilvusManage DependenciesAllocate ResourcesDeploy on CloudsScale a Milvus ClusterManage Resource GroupsUpgradeMonitor and AlertSecurityIntegrationsBenchmarksToolsReferenceExample ApplicationsFAQsAPI referenceScale a Milvus Cluster\nMilvus supports horizontal scaling of its components. This means you can either increase or decrease  the number of worker nodes of each type according to your own need.\nThis topic describes how to scale out and scale in a Milvus cluster. We assume that you have already installed a Milvus cluster before scaling. Also, we recommend familiarizing yourself with the Milvus architecture before you begin.\nThis tutorial takes scaling out three query nodes as an example. To scale out other types of nodes, replace queryNode with the corresponding node type in the command line.\nWhat is horizontal scaling?\nHorizontal scaling includes scaling out and scaling in.\nScaling out\nScaling out refers to increasing the number of nodes in a cluster. Unlike scaling up, scaling out does not require you to allocate more resources to one node in the cluster. Instead, scaling out expands the cluster horizontally by adding more nodes.\n\n    \n      \n    \n  \n  \n    \n    Scaleout illustration.\n  \n\n    \n      \n    \n  \n  \n    \n    Scaleup illustration.\n  \nAccording to the Milvus architecture, stateless worker nodes include query node, data node, index node, and proxy. Therefore, you can scale out these type of nodes to suit your business needs and application scenarios. You can either scale out the Milvus cluster manually or automatically.\nGenerally, you will need to scale out the Milvus cluster you created if it is over-utilized. Below are some typical situations where you may need to scale out the Milvus cluster:\n\nThe CPU and memory utilization is high for a period of time.\nThe query throughput becomes higher.\nHigher speed for indexing is required.\nMassive volumes of large datasets need to be processed.\nHigh availability of the Milvus service needs to be ensured.\n\nScaling in\nScaling in refers to decreasing the number of nodes in a cluster. Generally, you will need to scale in the Milvus cluster you created if it is under-utilized. Below are some typical situations where you need to scale in the Milvus cluster:\n\nThe CPU and memory utilization is low for a period of time.\nThe query throughput becomes lower.\nHigher speed for indexing is not required.\nThe size of the dataset to be processed is small.\n\n\nWe do not recommend reducing the number of workers nodes dramatically. For example, if there are five data nodes in the cluster, we recommend reducing one data node at a time to ensure service availability. If the service is available after the first attempt of scaling in, you can continue to further reduce the number of the data node.\n\nPrerequisites\nRun kubectl get pods to get a list of the components and their working status in the Milvus cluster you created.\nNAME                                            READY   STATUS       RESTARTS   AGE\nmy-release-etcd-0                               1/1     Running      0          1m\nmy-release-milvus-datacoord-7b5d84d8c6-rzjml    1/1     Running      0          1m\nmy-release-milvus-datanode-665d4586b9-525pm     1/1     Running      0          1m\nmy-release-milvus-indexcoord-9669d5989-kr5cm    1/1     Running      0          1m\nmy-release-milvus-indexnode-b89cc5756-xbpbn     1/1     Running      0          1m\nmy-release-milvus-proxy-7cbcc8ffbc-4jn8d        1/1     Running      0          1m\nmy-release-milvus-pulsar-6b9754c64d-4tg4m       1/1     Running      0          1m\nmy-release-milvus-querycoord-75f6c789f8-j28bg   1/1     Running      0          1m\nmy-release-milvus-querynode-7c7779c6f8-pnjzh    1/1     Running      0          1m\nmy-release-milvus-rootcoord-75585dc57b-cjh87    1/1     Running      0          1m\nmy-release-minio-5564fbbddc-9sbgv               1/1     Running      0          1m \n\n\nMilvus only supports adding the worker nodes and does not support adding the coordinator components.\n\nScale a Milvus cluster\nYou can scale in your Milvus cluster either manually or automatically. If autoscaling is enabled, the Milvus cluster will shrink or expand automatically when CPU and memory resources consumption reaches the value you have set.\nCurrently, Milvus 2.1.0 only supports scaling in and out manually.\nScaling out\nRun helm upgrade my-release milvus/milvus --set queryNode.replicas=3 --reuse-values to manually scale out the query node.\nIf successful, three running pods on the query node are added as shown in the following example.\nNAME                                            READY   STATUS    RESTARTS   AGE\nmy-release-etcd-0                               1/1     Running   0          2m\nmy-release-milvus-datacoord-7b5d84d8c6-rzjml    1/1     Running   0          2m\nmy-release-milvus-datanode-665d4586b9-525pm     1/1     Running   0          2m\nmy-release-milvus-indexcoord-9669d5989-kr5cm    1/1     Running   0          2m\nmy-release-milvus-indexnode-b89cc5756-xbpbn     1/1     Running   0          2m\nmy-release-milvus-proxy-7cbcc8ffbc-4jn8d        1/1     Running   0          2m\nmy-release-milvus-pulsar-6b9754c64d-4tg4m       1/1     Running   0          2m\nmy-release-milvus-querycoord-75f6c789f8-j28bg   1/1     Running   0          2m\nmy-release-milvus-querynode-7c7779c6f8-czq9f    1/1     Running   0          5s\nmy-release-milvus-querynode-7c7779c6f8-jcdcn    1/1     Running   0          5s\nmy-release-milvus-querynode-7c7779c6f8-pnjzh    1/1     Running   0          2m\nmy-release-milvus-rootcoord-75585dc57b-cjh87    1/1     Running   0          2m\nmy-release-minio-5564fbbddc-9sbgv               1/1     Running   0          2m\n\nScaling in\nRun helm upgrade my-release milvus/milvus --set queryNode.replicas=1 --reuse-values to scale in the query node.\nIf successful, three running pods on the query node are reduced to one as shown in the following example.\nNAME                                            READY   STATUS    RESTARTS   AGE\nmy-release-etcd-0                               1/1     Running   0          2m\nmy-release-milvus-datacoord-7b5d84d8c6-rzjml    1/1     Running   0          2m\nmy-release-milvus-datanode-665d4586b9-525pm     1/1     Running   0          2m\nmy-release-milvus-indexcoord-9669d5989-kr5cm    1/1     Running   0          2m\nmy-release-milvus-indexnode-b89cc5756-xbpbn     1/1     Running   0          2m\nmy-release-milvus-proxy-7cbcc8ffbc-4jn8d        1/1     Running   0          2m\nmy-release-milvus-pulsar-6b9754c64d-4tg4m       1/1     Running   0          2m\nmy-release-milvus-querycoord-75f6c789f8-j28bg   1/1     Running   0          2m\nmy-release-milvus-querynode-7c7779c6f8-pnjzh    1/1     Running   0          2m\nmy-release-milvus-rootcoord-75585dc57b-cjh87    1/1     Running   0          2m\nmy-release-minio-5564fbbddc-9sbgv               1/1     Running   0          2m\n\nWhat's next\n\n\nIf you want to learn how to monitor the Milvus services and create alerts:\n\nLearn Monitor Milvus with Prometheus Operator on Kubernetes\n\n\n\nIf you are ready to deploy your cluster on clouds:\n\nLearn how to Deploy Milvus on AWS with Terraform and Ansible\nLearn how to Deploy Milvus on Amazon EKS with Terraform\nLearn how to Deploy Milvus Cluster on GCP with Kubernetes\nLearn how to Deploy Milvus on Microsoft Azure With Kubernetes\n\n\n\nIf you are looking for instructions on how to allocate resources:\n\nAllocate Resources on Kubernetes\n\n\nscaleout.md was last updated at 2022-07-31 20:10:26: Remove autoscaling from scaleout.md (#1685)Edit this pageReport a bugRequest doc changesOn this pageScale a Milvus ClusterWhat is horizontal scaling?PrerequisitesScale a Milvus clusterWhat's nextResourcesDocsBlogManaged serviceTutorialsBootcampDemoVideoToolsAttuMilvus CLISizing ToolMivlus backup ToolCommunityGet involvedSlackGithubForumMilvus. 2023 All rights reserved./*<![CDATA[*/window.pagePath=\"/docs/scaleout.md\";/*]]>*//*<![CDATA[*/window.___chunkMapping={\"polyfill\":[\"/polyfill.js\"],\"app\":[\"/app.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js.js\",\"/component---src-pages-404-js.ffef32ceb6972d1b6709.css\"],\"component---src-pages-bootcamp-jsx\":[\"/component---src-pages-bootcamp-jsx.js\",\"/component---src-pages-bootcamp-jsx.edf1a55d3c49094e9b41.css\"],\"component---src-pages-community-index-jsx\":[\"/component---src-pages-community-index-jsx.js\",\"/component---src-pages-community-index-jsx.c505d2a5fff7c1e4b2c8.css\"],\"component---src-pages-index-jsx\":[\"/component---src-pages-index-jsx.js\",\"/component---src-pages-index-jsx.45df0d4bdfe2db469d6c.css\"],\"component---src-pages-milvus-demos-index-jsx\":[\"/component---src-pages-milvus-demos-index-jsx.js\",\"/component---src-pages-milvus-demos-index-jsx.1a3d1c4caf417de255ae.css\"],\"component---src-pages-milvus-demos-reverse-image-search-jsx\":[\"/component---src-pages-milvus-demos-reverse-image-search-jsx.js\",\"/component---src-pages-milvus-demos-reverse-image-search-jsx.c41e4c5ead83649937e8.css\"],\"component---src-pages-slack-jsx\":[\"/component---src-pages-slack-jsx.js\",\"/component---src-pages-slack-jsx.b3b356986d01fe89f9d1.css\"],\"component---src-pages-tools-sizing-jsx\":[\"/component---src-pages-tools-sizing-jsx.js\",\"/component---src-pages-tools-sizing-jsx.66d1c05015f9508df90b.css\"],\"component---src-templates-api-doc-template-jsx\":[\"/component---src-templates-api-doc-template-jsx.js\",\"/component---src-templates-api-doc-template-jsx.6c57c73b99682695a5ef.css\"],\"component---src-templates-blog-list-template-jsx\":[\"/component---src-templates-blog-list-template-jsx.js\",\"/component---src-templates-blog-list-template-jsx.71f592374d478c258caf.css\"],\"component---src-templates-blog-template-jsx\":[\"/component---src-templates-blog-template-jsx.js\",\"/component---src-templates-blog-template-jsx.5068317f62135173b013.css\"],\"component---src-templates-doc-template-jsx\":[\"/component---src-templates-doc-template-jsx.js\",\"/component---src-templates-doc-template-jsx.0e85fbce360982ff881c.css\"]};/*]]>*/", "content_type": "text", "score": null, "meta": {"url": "https://milvus.io/docs/scaleout.md"}, "id_hash_keys": ["content"], "embedding": null, "id": "24cf802b3614d3e8da33d0f2a4145ba4"}